<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Simulador de Notas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

  <div class="container mt-5">
    <div class="card shadow-lg">
      <div class="card-header text-center bg-primary text-white">
        <h3>Simulador de Notas do Concurso - MP-AP</h3>
      </div>
      <div class="card-body">
        <form id="form-simulador">
          <div class="mb-3">
            <label for="cg" class="form-label">Acertos em Conhecimentos Gerais (0 a 20)</label>
            <input type="number" class="form-control" id="cg" name="cg" min="0" max="20" required>
          </div>
          <div class="mb-3">
            <label for="ce" class="form-label">Acertos em Conhecimentos Específicos (0 a 30)</label>
            <input type="number" class="form-control" id="ce" name="ce" min="0" max="30" required>
          </div>
          <button type="submit" class="btn btn-success w-100">Calcular</button>
        </form>

        <div id="resultado" class="mt-4" style="display:none;">
          <h5>Resultado:</h5>
          <ul class="list-group">
            <li class="list-group-item">Nota Conhecimentos Gerais: <span id="notaCG"></span></li>
            <li class="list-group-item">Nota Conhecimentos Específicos: <span id="notaCE"></span></li>
            <li class="list-group-item">Nota Final: <span id="notaFinal"></span></li>
            <li class="list-group-item">Situação: <span id="situacao" class="fw-bold"></span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("form-simulador").addEventListener("submit", async function(e) {
      e.preventDefault();

      const cg = document.getElementById("cg").value;
      const ce = document.getElementById("ce").value;

      const res = await fetch("/calcular", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: `cg=${cg}&ce=${ce}`
      });

      const data = await res.json();

      document.getElementById("notaCG").innerText = data.notaCG;
      document.getElementById("notaCE").innerText = data.notaCE;
      document.getElementById("notaFinal").innerText = data.notaFinal;
      document.getElementById("situacao").innerText = data.situacao;

      document.getElementById("situacao").classList.remove("text-success", "text-danger");
      document.getElementById("situacao").classList.add(data.situacao === "Aprovado" ? "text-success" : "text-danger");

      document.getElementById("resultado").style.display = "block";
    });
  </script>

</body>
</html>
